{% extends 'base.html' %}

{% block title %}NPS Query Builder{% endblock %}
{% block description %}Build and execute custom SQL queries to explore NPS fund data.{% endblock %}
{% block keywords %}NPS, NAV, SQL Query Builder, Pension Funds, India{% endblock %}
{% block og_title %}NPS Query Builder{% endblock %}
{% block og_description %}Execute custom SQL queries to fetch NPS fund data interactively.{% endblock %}
{% block og_url %}https://npsnav.in/query-builder{% endblock %}
{% block canonical %}https://npsnav.in/query-builder{% endblock %}

{% block content %}

<div class="query-container">
    <h2>Custom NPS Query Builder</h2>
    <p>Enter a custom SQL <code>SELECT</code> query below to explore the NPS fund data:</p>

    <form id="query-form">
        <label for="query-input">SQL Query:</label>
        <textarea id="query-input" name="query" rows="5">
SELECT *
FROM fund_daily_values
WHERE fund_id IN ('SM001001', 'SM002002')
  AND date > '2024-12-05'
LIMIT 10
        </textarea>
        <button type="submit" id="query-submit">Run Query</button>
    </form>

    <div id="query-results">
        <h3>Query Results:</h3>
        <div class="tabs">
            <button class="tab active" data-tab="table-view">Table</button>
            <button class="tab" data-tab="json-view">JSON</button>
        </div>
        <div class="tab-content" id="table-view">
            <table id="results-table">
                <thead></thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="tab-content" id="json-view" style="display: none;">
            <pre id="results-json">JSON results will appear here...</pre>
        </div>
        <button id="download-csv" style="display: none;">Download CSV</button>
    </div>
</div>

{% endblock %}



{% block scripts %}
     <script src="/assets/js/query.js"></script>
{% endblock %}

